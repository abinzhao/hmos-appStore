import{e as m,ax as Pe,j as M,R as g,C as Be,u as Fe,ai as Ve,o as Te,d as ve,$ as Ge,aa as Le,ay as je,az as ze}from"./index-FD1T5Q2O.js";import{I as $e}from"./index-B1gdGVBm.js";import{I as ke}from"./index-Bw-ri7r9.js";function Ue(e){var r=e.inputElement,t=e.inputValue,n=m.useRef(null);return Pe(function(){try{var i=n.current;if(r&&t&&M(i)){var s=Math.max(0,t.length-i);r.setSelectionRange(s,s)}}catch(o){console.warn("Failed to reset input selection range position",o)}},[t]),function(i){var s=i.target,o=s.selectionEnd,f=s.value;M(o)&&(n.current=f.length-o)}}var He=function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,s=[],o;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(f){o={error:f}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return s};function ge(e){return!Number.isNaN(Number(e))&&String(e).includes("e")}function J(){return typeof BigInt=="function"}function Q(e){var r=String(e);if(ge(e)){var t=Number(r.slice(r.indexOf("e-")+2));return r.replace(/\.(\d+)/,function(n,i){return t+=i.length,n}),t}return r.includes(".")&&ye(r)?r.length-r.indexOf(".")-1:0}function he(e){var r=String(e);if(ge(e)){if(e<Number.MIN_SAFE_INTEGER)return J()?BigInt(e).toString():Number.MIN_SAFE_INTEGER.toString();if(e>Number.MAX_SAFE_INTEGER)return J()?BigInt(e).toString():Number.MAX_SAFE_INTEGER.toString();var t=Q(r);r=Number(e).toFixed(Math.min(100,t))}return A(r).fullStr}function ye(e){return typeof e=="number"?!Number.isNaN(e):e?/^\s*-?\d+(\.\d+)?\s*$/.test(e)||/^\s*-?\d+\.\s*$/.test(e)||/^\s*-?\.\d+\s*$/.test(e):!1}function A(e){var r=e.trim(),t=!1;r=r.replace(/^-/,function(){return t=!0,""}).replace(/(\.\d*[^0])0*$/,"$1").replace(/\.0*$/,"").replace(/^0+/,"").replace(/^\./,"0.");var n=r||"0",i=He(n.split("."),2),s=i[0],o=s===void 0?"0":s,f=i[1],p=f===void 0?"0":f;o==="0"&&p==="0"&&(t=!1);var u=t?"-":"";return{negative:t,negativeStr:u,trimStr:n,integerStr:o,decimalStr:p,fullStr:""+u+n}}var Ke=function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,s=[],o;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(f){o={error:f}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return s},Xe=function(){function e(r){if(this.origin="",this.origin=String(r),!r&&r!==0||!this.origin.trim()){this.isEmpty=!0;return}if(r==="-"){this.isNaN=!0;return}var t=he(r);if(ye(t)){var n=A(t),i=n.negative,s=n.trimStr,o=Ke(s.split("."),2),f=o[0],p=o[1],u=p===void 0?"0":p;this.isNegative=i,this.integer=BigInt(f),this.decimal=BigInt(u),this.decimalLen=u.length}else this.isNaN=!0}return Object.defineProperty(e.prototype,"isInvalid",{get:function(){return this.isEmpty||this.isNaN},enumerable:!1,configurable:!0}),e.prototype.getMark=function(){return this.isNegative?"-":""},e.prototype.getIntegerStr=function(){return this.integer.toString()},e.prototype.getDecimalStr=function(){return this.decimal.toString().padStart(this.decimalLen,"0")},e.prototype.alignDecimal=function(r){return BigInt(""+this.getMark()+this.getIntegerStr()+this.getDecimalStr().padEnd(r,"0"))},e.prototype.negate=function(){var r=this.toString();return new e(r.startsWith("-")?r.slice(1):"-"+r)},e.prototype.add=function(r){var t=new e(r);if(t.isInvalid)return this;if(this.isInvalid)return t;var n=Math.max(this.decimalLen,t.decimalLen),i=this.alignDecimal(n),s=t.alignDecimal(n),o=(i+s).toString(),f=A(o),p=f.negativeStr,u=f.trimStr,y=""+p+u.padStart(n+1,"0");return new e(y.slice(0,-n)+"."+y.slice(-n))},e.prototype.equals=function(r){return this.toString()===(r==null?void 0:r.toString())},e.prototype.less=function(r){return this.isInvalid||r.isInvalid?!1:this.add(r.negate().toString()).toNumber()<0},e.prototype.toNumber=function(){return this.isNaN?NaN:Number(this.toString())},e.prototype.toString=function(r){r===void 0&&(r={safe:!0});var t=r.safe,n=r.precision,i=t?this.isInvalid?"":A(""+this.getMark()+this.getIntegerStr()+"."+this.getDecimalStr()).fullStr:this.origin;return typeof n=="number"?Z(i,n):i},e}(),qe=function(){function e(r){this.origin="",this.origin=String(r),this.number=Number(r),!r&&r!==0||!this.origin.trim()?this.isEmpty=!0:this.isNaN=Number.isNaN(this.number)}return Object.defineProperty(e.prototype,"isInvalid",{get:function(){return this.isEmpty||this.isNaN},enumerable:!1,configurable:!0}),e.prototype.negate=function(){return new e(-this.toNumber())},e.prototype.equals=function(r){return this.toNumber()===(r==null?void 0:r.toNumber())},e.prototype.less=function(r){return this.isInvalid||r.isInvalid?!1:this.add(r.negate().toString()).toNumber()<0},e.prototype.add=function(r){var t=new e(r);if(t.isInvalid)return this;if(this.isInvalid)return t;var n=this.number+t.number;if(n>Number.MAX_SAFE_INTEGER)return new e(Number.MAX_SAFE_INTEGER);if(n<Number.MIN_SAFE_INTEGER)return new e(Number.MIN_SAFE_INTEGER);var i=Math.max(Q(this.number),Q(t.number));return new e(n.toFixed(i))},e.prototype.toNumber=function(){return this.number},e.prototype.toString=function(r){r===void 0&&(r={safe:!0});var t=r.safe,n=r.precision,i=t?this.isInvalid?"":he(this.number):this.origin;return typeof n=="number"?Z(i,n):i},e}();function b(e){return J()?new Xe(e):new qe(e)}function Z(e,r,t){if(t===void 0&&(t=!1),e==="")return"";var n=".",i=A(e),s=i.negativeStr,o=i.integerStr,f=i.decimalStr,p=""+n+f,u=""+s+o;if(r>=0){var y=Number(f[r]);if(y>=5&&!t){var L=b(e).add(s+"0."+"0".repeat(r)+(10-y));return Z(L.toString(),r,t)}return r===0?u:""+u+n+f.padEnd(r,"0").slice(0,r)}return""+u+(p===".0"?"":p)}var G=function(){return G=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},G.apply(this,arguments)},We=function(e,r){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(t[n[i]]=e[n[i]]);return t},D=function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,s=[],o;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(f){o={error:f}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return s},Ye=200,Je=1e3,Qe={max:1/0,min:-1/0,step:1,mode:"embed",parser:function(e){return(e==null?void 0:e.replace(/[^\w\.-]+/g,""))||""}};function Ze(e,r){var t,n,i=m.useContext(Be),s=i.getPrefixCls,o=i.size,f=i.componentConfig,p=i.rtl,u=Fe(e,Qe,f==null?void 0:f.InputNumber),y=u.className,L=u.style,Se=u.defaultValue,j=u.disabled,Ne=u.error,_=u.readOnly,be=u.strictMode,Ie=u.placeholder,ee=u.hideControl,re=u.suffix,te=u.prefix,v=u.icons,z=u.mode,Ee=u.size,$=u.step,ne=u.precision,I=u.min,R=u.max,x=u.parser,k=u.formatter,U=u.onBlur,H=u.onFocus,ie=u.onChange,K=u.onKeyDown,_e=We(u,["className","style","defaultValue","disabled","error","readOnly","strictMode","placeholder","hideControl","suffix","prefix","icons","mode","size","step","precision","min","max","parser","formatter","onBlur","onFocus","onChange","onKeyDown"]),h=s("input-number"),ae=Ee||o,C=function(){if(M(ne)){var a=(""+$).split(".")[1],l=a&&a.length||0;return Math.max(l,ne)}return null}(),ue=D(m.useState(function(){return b("value"in u?u.value:"defaultValue"in u?Se:void 0)}),2),oe=ue[0],xe=ue[1],se=D(m.useState(""),2),P=se[0],le=se[1],fe=D(m.useState(!1),2),we=fe[0],Oe=fe[1],de=D(m.useState(!1),2),X=de[0],q=de[1],w=m.useRef(null),E=m.useRef(null),W=m.useRef(!1),c=m.useMemo(function(){return"value"in u?b(u.value):oe},[u.value,oe]),ce=D(m.useMemo(function(){return[b(R),b(I)]},[R,I]),2),S=ce[0],N=ce[1];m.useImperativeHandle(r,function(){return E.current},[]);var B=function(a,l){if(xe(a),!a.equals(c)&&ie){var d=a.toString({safe:!0,precision:C});ie(a.isEmpty?void 0:be?d:a.isNaN?NaN:Number(d),l)}},F=function(){w.current&&clearTimeout(w.current),w.current=null},O=m.useCallback(function(a){var l=a;return l.less(N)?l=N:S.less(l)&&(l=S),l},[N,S]);m.useEffect(function(){return function(){return F()}},[]),m.useEffect(function(){W.current=!1},[u.value]),m.useEffect(function(){var a=c.less(N)||S.less(c);a&&W.current&&B(O(c),"outOfRange"),Oe(a)},[N,S,c,O]);var Y=function(a,l,d){if(d===void 0&&(d=!1),a.persist(),a.preventDefault(),q(!1),!(j||_)){var T=c.isInvalid?b(I===-1/0||I<=0&&R>=0?0:I):c.add(l==="plus"?$:-$);if(B(O(T),l==="plus"?"increase":"decrease"),E.current&&E.current.focus(),d){var Ce=w.current===null;w.current=setTimeout(function(){return a.target.dispatchEvent(a.nativeEvent)},Ce?Je:Ye)}}},me=m.useMemo(function(){var a;return X?a=x?""+x(P):P:M(C)?a=c.toString({safe:!0,precision:C}):c.isInvalid?a="":a=c.toString(),k?k(a,{userTyping:X,input:P}):a},[c,P,X,C,x,k]),De=Ue({inputElement:(n=E.current)===null||n===void 0?void 0:n.dom,inputValue:me}),Me={onChange:function(a,l){q(!0),a=a.trim().replace(/ã€‚/g,".");var d=x?x(a):a;(M(+d)||d==="-"||!d||d===".")&&(le(a),B(O(b(d)),"manual"),De(l))},onKeyDown:function(a){var l=a.key;l===je.key?(a.stopPropagation(),Y(a,"minus")):l===ze.key&&(a.stopPropagation(),Y(a,"plus")),F(),K==null||K(a)},onFocus:function(a){var l,d;W.current=!0,le((d=(l=E.current)===null||l===void 0?void 0:l.dom)===null||d===void 0?void 0:d.value),H==null||H(a)},onBlur:function(a){B(O(c),"outOfRange"),q(!1),U==null||U(a)}},Ae=function(a){return _?{}:{onMouseDown:function(l){return Y(l,a,!0)}}},pe=!ee&&z==="button",Re=!ee&&!_&&z==="embed",V=function(a,l){var d,T=!j&&(c.isInvalid||(a==="plus"?S.isInvalid||c.less(S):N.isInvalid||N.less(c)));return g.createElement("div",G({className:ve(h+"-step-button",(d={},d[h+"-step-button-disabled"]=!T,d)),onMouseLeave:F,onMouseUp:F},T?Ae(a):{}),l)};return g.createElement(Ve,G({_ignorePropsFromGlobal:!0,role:"spinbutton","aria-valuemax":R,"aria-valuemin":I,"aria-valuenow":c.isEmpty?void 0:c.toNumber()},Te(_e,["allowClear"]),Me,{style:L,className:ve(h,h+"-mode-"+z,h+"-size-"+ae,(t={},t[h+"-rtl"]=p,t[h+"-readonly"]=_,t[h+"-illegal-value"]=!c.isEmpty&&we,t),y),ref:E,size:ae,error:Ne,disabled:j,readOnly:_,value:me,placeholder:Ie,prefix:te&&g.createElement("div",{className:h+"-prefix"},te),suffix:g.createElement(g.Fragment,null,Re&&g.createElement("div",{className:h+"-step-layer"},V("plus",v&&v.up?v.up:g.createElement($e,null)),V("minus",v&&v.down?v.down:g.createElement(Ge,null))),re&&g.createElement("div",{className:h+"-suffix"},re)),addBefore:pe&&V("minus",v&&v.minus?v.minus:g.createElement(ke,null)),addAfter:pe&&V("plus",v&&v.plus?v.plus:g.createElement(Le,null))}))}var er=g.forwardRef(Ze);er.displayName="InputNumber";export{er as I};
