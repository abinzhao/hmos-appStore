import{e as h,_ as X,R as S,k as wn,b5 as In,b6 as Sn}from"./index-FD1T5Q2O.js";var Z="data-focus-lock",ke="data-focus-lock-disabled",Tn="data-no-focus-lock",An="data-autofocus-inside",Mn="data-no-autofocus";function Q(e,n){return typeof e=="function"?e(n):e&&(e.current=n),e}function Pn(e,n){var r=h.useState(function(){return{value:e,callback:n,facade:{get current(){return r.value},set current(t){var u=r.value;u!==t&&(r.value=t,r.callback(t,u))}}}})[0];return r.callback=n,r.facade}var kn=typeof window<"u"?h.useLayoutEffect:h.useEffect,Oe=new WeakMap;function Cn(e,n){var r=Pn(null,function(t){return e.forEach(function(u){return Q(u,t)})});return kn(function(){var t=Oe.get(r);if(t){var u=new Set(t),a=new Set(e),o=r.current;u.forEach(function(i){a.has(i)||Q(i,null)}),a.forEach(function(i){u.has(i)||Q(i,o)})}Oe.set(r,e)},[e]),r}var K={width:"1px",height:"0px",padding:0,overflow:"hidden",position:"fixed",top:"1px",left:"1px"},ee=function(){return ee=Object.assign||function(n){for(var r,t=1,u=arguments.length;t<u;t++){r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])}return n},ee.apply(this,arguments)};function Ce(e){return e}function Ne(e,n){n===void 0&&(n=Ce);var r=[],t=!1,u={read:function(){if(t)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(a){var o=n(a,t);return r.push(o),function(){r=r.filter(function(i){return i!==o})}},assignSyncMedium:function(a){for(t=!0;r.length;){var o=r;r=[],o.forEach(a)}r={push:function(i){return a(i)},filter:function(){return r}}},assignMedium:function(a){t=!0;var o=[];if(r.length){var i=r;r=[],i.forEach(a),o=r}var v=function(){var l=o;o=[],l.forEach(a)},f=function(){return Promise.resolve().then(v)};f(),r={push:function(l){o.push(l),f()},filter:function(l){return o=o.filter(l),r}}}};return u}function ue(e,n){return n===void 0&&(n=Ce),Ne(e,n)}function Nn(e){e===void 0&&(e={});var n=Ne(null);return n.options=ee({async:!0,ssr:!1},e),n}var Le=ue({},function(e){var n=e.target,r=e.currentTarget;return{target:n,currentTarget:r}}),De=ue(),Ln=ue(),Dn=Nn({async:!0,ssr:typeof document<"u"}),Rn=h.createContext(void 0),Wn=[],ae=h.forwardRef(function(n,r){var t,u=h.useState(),a=u[0],o=u[1],i=h.useRef(),v=h.useRef(!1),f=h.useRef(null),l=h.useState({}),d=l[1],c=n.children,b=n.disabled,s=b===void 0?!1:b,m=n.noFocusGuards,y=m===void 0?!1:m,x=n.persistentFocus,p=x===void 0?!1:x,g=n.crossFrame,E=g===void 0?!0:g,w=n.autoFocus,P=w===void 0?!0:w;n.allowTextSelection;var B=n.group,V=n.className,an=n.whiteList,on=n.hasPositiveIndices,pe=n.shards,$=pe===void 0?Wn:pe,ge=n.as,fn=ge===void 0?"div":ge,ye=n.lockProps,cn=ye===void 0?{}:ye,dn=n.sideCar,Fe=n.returnFocus,G=Fe===void 0?!1:Fe,sn=n.focusOptions,q=n.onActivation,j=n.onDeactivation,ln=h.useState({}),vn=ln[0],mn=h.useCallback(function(I){var k=I.captureFocusRestore;if(!f.current){var C,T=(C=document)==null?void 0:C.activeElement;f.current=T,T!==document.body&&(f.current=k(T))}i.current&&q&&q(i.current),v.current=!0,d()},[q]),bn=h.useCallback(function(){v.current=!1,j&&j(i.current),d()},[j]),hn=h.useCallback(function(I){var k=f.current;if(k){var C=(typeof k=="function"?k():k)||document.body,T=typeof G=="function"?G(C):G;if(T){var Ee=typeof T=="object"?T:void 0;f.current=null,I?Promise.resolve().then(function(){return C.focus(Ee)}):C.focus(Ee)}}},[G]),pn=h.useCallback(function(I){v.current&&Le.useMedium(I)},[]),gn=De.useMedium,yn=h.useCallback(function(I){i.current!==I&&(i.current=I,o(I))},[]),Fn=X((t={},t[ke]=s&&"disabled",t[Z]=B,t),cn),xe=y!==!0,xn=xe&&y!=="tail",En=Cn([r,yn]),On=h.useMemo(function(){return{observed:i,shards:$,enabled:!s,active:v.current}},[s,v.current,$,a]);return S.createElement(h.Fragment,null,xe&&[S.createElement("div",{key:"guard-first","data-focus-guard":!0,tabIndex:s?-1:0,style:K}),on?S.createElement("div",{key:"guard-nearest","data-focus-guard":!0,tabIndex:s?-1:1,style:K}):null],!s&&S.createElement(dn,{id:vn,sideCar:Dn,observed:a,disabled:s,persistentFocus:p,crossFrame:E,autoFocus:P,whiteList:an,shards:$,onActivation:mn,onDeactivation:bn,returnFocus:hn,focusOptions:sn,noFocusGuards:y}),S.createElement(fn,X({ref:En},Fn,{className:V,onBlur:gn,onFocus:pn}),S.createElement(Rn.Provider,{value:On},c)),xn&&S.createElement("div",{"data-focus-guard":!0,tabIndex:s?-1:0,style:K}))});ae.propTypes={};function _n(e,n){function r(t){return t.displayName||t.name||"Component"}return function(u){var a=[],o;function i(){o=e(a.map(function(f){return f.props})),n(o)}var v=function(f){In(l,f);function l(){return f.apply(this,arguments)||this}l.peek=function(){return o};var d=l.prototype;return d.componentDidMount=function(){a.push(this),i()},d.componentDidUpdate=function(){i()},d.componentWillUnmount=function(){var b=a.indexOf(this);a.splice(b,1),i()},d.render=function(){return S.createElement(u,this.props)},l}(h.PureComponent);return wn(v,"displayName","SideEffect("+r(u)+")"),v}}var O=function(e){for(var n=Array(e.length),r=0;r<e.length;++r)n[r]=e[r];return n},M=function(e){return Array.isArray(e)?e:[e]},Re=function(e){return Array.isArray(e)?e[0]:e},Un=function(e){if(e.nodeType!==Node.ELEMENT_NODE)return!1;var n=window.getComputedStyle(e,null);return!n||!n.getPropertyValue?!1:n.getPropertyValue("display")==="none"||n.getPropertyValue("visibility")==="hidden"},We=function(e){return e.parentNode&&e.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE?e.parentNode.host:e.parentNode},_e=function(e){return e===document||e&&e.nodeType===Node.DOCUMENT_NODE},Bn=function(e){return e.hasAttribute("inert")},Gn=function(e,n){return!e||_e(e)||!Un(e)&&!Bn(e)&&n(We(e))},Ue=function(e,n){var r=e.get(n);if(r!==void 0)return r;var t=Gn(n,Ue.bind(void 0,e));return e.set(n,t),t},Hn=function(e,n){return e&&!_e(e)?qn(e)?n(We(e)):!1:!0},Be=function(e,n){var r=e.get(n);if(r!==void 0)return r;var t=Hn(n,Be.bind(void 0,e));return e.set(n,t),t},Ge=function(e){return e.dataset},Vn=function(e){return e.tagName==="BUTTON"},He=function(e){return e.tagName==="INPUT"},Ve=function(e){return He(e)&&e.type==="radio"},$n=function(e){return!((He(e)||Vn(e))&&(e.type==="hidden"||e.disabled))},qn=function(e){var n=e.getAttribute(Mn);return![!0,"true",""].includes(n)},oe=function(e){var n;return!!(e&&(!((n=Ge(e))===null||n===void 0)&&n.focusGuard))},ne=function(e){return!oe(e)},jn=function(e){return!!e},Qn=function(e,n){var r=Math.max(0,e.tabIndex),t=Math.max(0,n.tabIndex),u=r-t,a=e.index-n.index;if(u){if(!r)return 1;if(!t)return-1}return u||a},Kn=function(e){return e.tabIndex<0&&!e.hasAttribute("tabindex")?0:e.tabIndex},ie=function(e,n,r){return O(e).map(function(t,u){var a=Kn(t);return{node:t,index:u,tabIndex:r&&a===-1?(t.dataset||{}).focusGuard?0:-1:a}}).filter(function(t){return!n||t.tabIndex>=0}).sort(Qn)},Yn=["button:enabled","select:enabled","textarea:enabled","input:enabled","a[href]","area[href]","summary","iframe","object","embed","audio[controls]","video[controls]","[tabindex]","[contenteditable]","[autofocus]"],fe=Yn.join(","),zn="".concat(fe,", [data-focus-guard]"),$e=function(e,n){return O((e.shadowRoot||e).children).reduce(function(r,t){return r.concat(t.matches(n?zn:fe)?[t]:[],$e(t))},[])},Jn=function(e,n){var r;return e instanceof HTMLIFrameElement&&(!((r=e.contentDocument)===null||r===void 0)&&r.body)?D([e.contentDocument.body],n):[e]},D=function(e,n){return e.reduce(function(r,t){var u,a=$e(t,n),o=(u=[]).concat.apply(u,a.map(function(i){return Jn(i,n)}));return r.concat(o,t.parentNode?O(t.parentNode.querySelectorAll(fe)).filter(function(i){return i===t}):[])},[])},Xn=function(e){var n=e.querySelectorAll("[".concat(An,"]"));return O(n).map(function(r){return D([r])}).reduce(function(r,t){return r.concat(t)},[])},ce=function(e,n){return O(e).filter(function(r){return Ue(n,r)}).filter(function(r){return $n(r)})},we=function(e,n){return n===void 0&&(n=new Map),O(e).filter(function(r){return Be(n,r)})},de=function(e,n,r){return ie(ce(D(e,r),n),!0,r)},W=function(e,n){return ie(ce(D(e),n),!1)},Zn=function(e,n){return ce(Xn(e),n)},A=function(e,n){return e.shadowRoot?A(e.shadowRoot,n):Object.getPrototypeOf(e).contains!==void 0&&Object.getPrototypeOf(e).contains.call(e,n)?!0:O(e.children).some(function(r){var t;if(r instanceof HTMLIFrameElement){var u=(t=r.contentDocument)===null||t===void 0?void 0:t.body;return u?A(u,n):!1}return A(r,n)})},er=function(e){for(var n=new Set,r=e.length,t=0;t<r;t+=1)for(var u=t+1;u<r;u+=1){var a=e[t].compareDocumentPosition(e[u]);(a&Node.DOCUMENT_POSITION_CONTAINED_BY)>0&&n.add(u),(a&Node.DOCUMENT_POSITION_CONTAINS)>0&&n.add(t)}return e.filter(function(o,i){return!n.has(i)})},qe=function(e){return e.parentNode?qe(e.parentNode):e},se=function(e){var n=M(e);return n.filter(Boolean).reduce(function(r,t){var u=t.getAttribute(Z);return r.push.apply(r,u?er(O(qe(t).querySelectorAll("[".concat(Z,'="').concat(u,'"]:not([').concat(ke,'="disabled"])')))):[t]),r},[])},nr=function(e){try{return e()}catch{return}},_=function(e){if(e===void 0&&(e=document),!(!e||!e.activeElement)){var n=e.activeElement;return n.shadowRoot?_(n.shadowRoot):n instanceof HTMLIFrameElement&&nr(function(){return n.contentWindow.document})?_(n.contentWindow.document):n}},rr=function(e,n){return e===n},tr=function(e,n){return!!O(e.querySelectorAll("iframe")).some(function(r){return rr(r,n)})},je=function(e,n){return n===void 0&&(n=_(Re(e).ownerDocument)),!n||n.dataset&&n.dataset.focusGuard?!1:se(e).some(function(r){return A(r,n)||tr(r,n)})},ur=function(e){e===void 0&&(e=document);var n=_(e);return n?O(e.querySelectorAll("[".concat(Tn,"]"))).some(function(r){return A(r,n)}):!1},ar=function(e,n){return n.filter(Ve).filter(function(r){return r.name===e.name}).filter(function(r){return r.checked})[0]||e},le=function(e,n){return Ve(e)&&e.name?ar(e,n):e},or=function(e){var n=new Set;return e.forEach(function(r){return n.add(le(r,e))}),e.filter(function(r){return n.has(r)})},Ie=function(e){return e[0]&&e.length>1?le(e[0],e):e[0]},Se=function(e,n){return e.indexOf(le(n,e))},re="NEW_FOCUS",ir=function(e,n,r,t,u){var a=e.length,o=e[0],i=e[a-1],v=oe(t);if(!(t&&e.indexOf(t)>=0)){var f=t!==void 0?r.indexOf(t):-1,l=u?r.indexOf(u):f,d=u?e.indexOf(u):-1;if(f===-1)return d!==-1?d:re;if(d===-1)return re;var c=f-l,b=r.indexOf(o),s=r.indexOf(i),m=or(r),y=t!==void 0?m.indexOf(t):-1,x=u?m.indexOf(u):y,p=m.filter(function(V){return V.tabIndex>=0}),g=t!==void 0?p.indexOf(t):-1,E=u?p.indexOf(u):g,w=g>=0&&E>=0?E-g:x-y;if(!c&&d>=0||n.length===0)return d;var P=Se(e,n[0]),B=Se(e,n[n.length-1]);if(f<=b&&v&&Math.abs(c)>1)return B;if(f>=s&&v&&Math.abs(c)>1)return P;if(c&&Math.abs(w)>1)return d;if(f<=b)return B;if(f>s)return P;if(c)return Math.abs(c)>1?d:(a+d+c)%a}},fr=function(e){return function(n){var r,t=(r=Ge(n))===null||r===void 0?void 0:r.autofocus;return n.autofocus||t!==void 0&&t!=="false"||e.indexOf(n)>=0}},Te=function(e,n,r){var t=e.map(function(a){var o=a.node;return o}),u=we(t.filter(fr(r)));return u&&u.length?Ie(u):Ie(we(n))},te=function(e,n){return n===void 0&&(n=[]),n.push(e),e.parentNode&&te(e.parentNode.host||e.parentNode,n),n},Y=function(e,n){for(var r=te(e),t=te(n),u=0;u<r.length;u+=1){var a=r[u];if(t.indexOf(a)>=0)return a}return!1},Qe=function(e,n,r){var t=M(e),u=M(n),a=t[0],o=!1;return u.filter(Boolean).forEach(function(i){o=Y(o||i,i)||o,r.filter(Boolean).forEach(function(v){var f=Y(a,v);f&&(!o||A(f,o)?o=f:o=Y(f,o))})}),o},Ae=function(e,n){return e.reduce(function(r,t){return r.concat(Zn(t,n))},[])},cr=function(e,n){var r=new Map;return n.forEach(function(t){return r.set(t.node,t)}),e.map(function(t){return r.get(t)}).filter(jn)},dr=function(e,n){var r=_(M(e).length>0?document:Re(e).ownerDocument),t=se(e).filter(ne),u=Qe(r||e,e,t),a=new Map,o=W(t,a),i=o.filter(function(s){var m=s.node;return ne(m)});if(i[0]){var v=W([u],a).map(function(s){var m=s.node;return m}),f=cr(v,i),l=f.map(function(s){var m=s.node;return m}),d=f.filter(function(s){var m=s.tabIndex;return m>=0}).map(function(s){var m=s.node;return m}),c=ir(l,d,v,r,n);if(c===re){var b=Te(o,d,Ae(t,a))||Te(o,l,Ae(t,a));if(b)return{node:b};console.warn("focus-lock: cannot find any node to move focus into");return}return c===void 0?c:f[c]}},sr=function(e){var n=se(e).filter(ne),r=Qe(e,e,n),t=ie(D([r],!0),!0,!0),u=D(n,!1);return t.map(function(a){var o=a.node,i=a.index;return{node:o,index:i,lockItem:u.indexOf(o)>=0,guard:oe(o)}})},ve=function(e,n){e&&("focus"in e&&e.focus(n),"contentWindow"in e&&e.contentWindow&&e.contentWindow.focus())},z=0,J=!1,Ke=function(e,n,r){r===void 0&&(r={});var t=dr(e,n);if(!J&&t){if(z>2){console.error("FocusLock: focus-fighting detected. Only one focus management system could be active. See https://github.com/theKashey/focus-lock/#focus-fighting"),J=!0,setTimeout(function(){J=!1},1);return}z++,ve(t.node,r.focusOptions),z--}};function R(e){if(!e)return null;if(typeof WeakRef>"u")return function(){return e||null};var n=e?new WeakRef(e):null;return function(){return(n==null?void 0:n.deref())||null}}var lr=function(e){if(!e)return null;for(var n=[],r=e;r&&r!==document.body;)n.push({current:R(r),parent:R(r.parentElement),left:R(r.previousElementSibling),right:R(r.nextElementSibling)}),r=r.parentElement;return{element:R(e),stack:n,ownerDocument:e.ownerDocument}},vr=function(e){var n,r,t,u,a;if(e)for(var o=e.stack,i=e.ownerDocument,v=new Map,f=0,l=o;f<l.length;f++){var d=l[f],c=(n=d.parent)===null||n===void 0?void 0:n.call(d);if(c&&i.contains(c)){for(var b=(r=d.left)===null||r===void 0?void 0:r.call(d),s=d.current(),m=c.contains(s)?s:void 0,y=(t=d.right)===null||t===void 0?void 0:t.call(d),x=de([c],v),p=(a=(u=m??(b==null?void 0:b.nextElementSibling))!==null&&u!==void 0?u:y)!==null&&a!==void 0?a:b;p;){for(var g=0,E=x;g<E.length;g++){var w=E[g];if(p!=null&&p.contains(w.node))return w.node}p=p.nextElementSibling}if(x.length)return x[0].node}}},Ye=function(e){var n=lr(e);return function(){return vr(n)}},mr=function(e,n,r){if(!e||!n)return console.error("no element or scope given"),{};var t=M(n);if(t.every(function(o){return!A(o,e)}))return console.error("Active element is not contained in the scope"),{};var u=r?de(t,new Map):W(t,new Map),a=u.findIndex(function(o){var i=o.node;return i===e});if(a!==-1)return{prev:u[a-1],next:u[a+1],first:u[0],last:u[u.length-1]}},br=function(e,n){var r=n?de(M(e),new Map):W(M(e),new Map);return{first:r[0],last:r[r.length-1]}},hr=function(e){return Object.assign({scope:document.body,cycle:!0,onlyTabbable:!0},e)},ze=function(e,n,r){n===void 0&&(n={});var t=hr(n),u=mr(e,t.scope,t.onlyTabbable);if(u){var a=r(u,t.cycle);a&&ve(a.node,t.focusOptions)}},pr=function(e,n){n===void 0&&(n={}),ze(e,n,function(r,t){var u=r.next,a=r.first;return u||t&&a})},gr=function(e,n){n===void 0&&(n={}),ze(e,n,function(r,t){var u=r.prev,a=r.last;return u||t&&a})},Je=function(e,n,r){var t,u=br(e,(t=n.onlyTabbable)!==null&&t!==void 0?t:!0),a=u[r];a&&ve(a.node,n.focusOptions)},yr=function(e,n){n===void 0&&(n={}),Je(e,n,"first")},Fr=function(e,n){n===void 0&&(n={}),Je(e,n,"last")};function me(e){setTimeout(e,1)}var xr=function(n){return n&&"current"in n?n.current:n},Xe=function(){return document&&document.activeElement===document.body},Er=function(){return Xe()||ur()},N=null,F=null,Me=function(){return null},L=null,U=!1,be=!1,Or=function(){return!0},wr=function(n){return(N.whiteList||Or)(n)},Ir=function(n,r){L={observerNode:n,portaledElement:r}},Sr=function(n){return L&&L.portaledElement===n};function Pe(e,n,r,t){var u=null,a=e;do{var o=t[a];if(o.guard)o.node.dataset.focusAutoGuard&&(u=o);else if(o.lockItem){if(a!==e)return;u=null}else break}while((a+=r)!==n);u&&(u.node.tabIndex=0)}var Tr=function(n){return n?!!U:U==="meanwhile"},Ar=function e(n,r,t){return r&&(r.host===n&&(!r.activeElement||t.contains(r.activeElement))||r.parentNode&&e(n,r.parentNode,t))},Mr=function(n,r){return r.some(function(t){return Ar(n,t,t)})},Ze=function(n){return W(n,new Map)},Pr=function(n){return!Ze([n.parentNode]).some(function(r){return r.node===n})},H=function(){var n=!1;if(N){var r=N,t=r.observed,u=r.persistentFocus,a=r.autoFocus,o=r.shards,i=r.crossFrame,v=r.focusOptions,f=r.noFocusGuards,l=t||L&&L.portaledElement;if(Xe()&&F&&F!==document.body&&(!document.body.contains(F)||Pr(F))){var d=Me();d&&d.focus()}var c=document&&document.activeElement;if(l){var b=[l].concat(o.map(xr).filter(Boolean)),s=function(){if(!Tr(i)||!f||!F||be)return!1;var g=Ze(b),E=g.findIndex(function(w){var P=w.node;return P===F});return E===0||E===g.length-1};if((!c||wr(c))&&(u||s()||!Er()||!F&&a)&&(l&&!(je(b)||c&&Mr(c,b)||Sr(c))&&(document&&!F&&c&&!a?(c.blur&&c.blur(),document.body.focus()):(n=Ke(b,F,{focusOptions:v}),L={})),F=document&&document.activeElement,F!==document.body&&(Me=Ye(F)),U=!1),document&&c!==document.activeElement&&document.querySelector("[data-focus-auto-guard]")){var m=document&&document.activeElement,y=sr(b),x=y.map(function(p){var g=p.node;return g}).indexOf(m);x>-1&&(y.filter(function(p){var g=p.guard,E=p.node;return g&&E.dataset.focusAutoGuard}).forEach(function(p){var g=p.node;return g.removeAttribute("tabIndex")}),Pe(x,y.length,1,y),Pe(x,-1,-1,y))}}}return n},en=function(n){H()&&n&&(n.stopPropagation(),n.preventDefault())},he=function(){return me(H)},kr=function(n){var r=n.target,t=n.currentTarget;t.contains(r)||Ir(t,r)},Cr=function(){return null},nn=function(){be=!0},rn=function(){be=!1,U="just",me(function(){U="meanwhile"})},Nr=function(){document.addEventListener("focusin",en),document.addEventListener("focusout",he),window.addEventListener("focus",nn),window.addEventListener("blur",rn)},Lr=function(){document.removeEventListener("focusin",en),document.removeEventListener("focusout",he),window.removeEventListener("focus",nn),window.removeEventListener("blur",rn)};function Dr(e){return e.filter(function(n){var r=n.disabled;return!r})}var tn={moveFocusInside:Ke,focusInside:je,focusNextElement:pr,focusPrevElement:gr,focusFirstElement:yr,focusLastElement:Fr,captureFocusRestore:Ye};function Rr(e){var n=e.slice(-1)[0];n&&!N&&Nr();var r=N,t=r&&n&&n.id===r.id;N=n,r&&!t&&(r.onDeactivation(),e.filter(function(u){var a=u.id;return a===r.id}).length||r.returnFocus(!n)),n?(F=null,(!t||r.observed!==n.observed)&&n.onActivation(tn),H(),me(H)):(Lr(),F=null)}Le.assignSyncMedium(kr);De.assignMedium(he);Ln.assignMedium(function(e){return e(tn)});const Wr=_n(Dr,Rr)(Cr);var _r=h.forwardRef(function(n,r){return S.createElement(ae,X({sideCar:Wr,ref:r},n))}),un=ae.propTypes||{};un.sideCar;Sn(un,["sideCar"]);_r.propTypes={};export{_r as F};
